!function(t){"use strict";jQuery.fn.filterableUtils={isNull:function(t){return null==t},notNull:function(t){return!this.isNull(t)}}}(),function(t){"use strict";var e=function(e,i){this.$cell=t(e),this.match=null,this.options=t.extend({},t.fn.filterableCell.defaults,i),this.init()};e.prototype={constructor:e,value:function(){return this.$cell.text()},setMatch:function(t){t?(this.$cell.addClass("filterable-match"),this.$cell.removeClass("filterable-mismatch")):(this.$cell.addClass("filterable-mismatch"),this.$cell.removeClass("filterable-match"))},isMatch:function(t){if("function"==typeof this.options.isMatch)this.match=this.options.isMatch(this.$cell,t);else{t="\\NULL"==t?"^\\s*$":".*"+(t=(t=t.replace(/[\-\[\]\/\{\}\(\)\+\?\.\\\^\$\|]/g,"\\$&")).replace(/\*/,".*"))+".*";var e=this.options.ignoreCase?"i":"",i=new RegExp(t,e);this.match=!0===i.test(this.value())}return this.setMatch(this.match),this.match},init:function(){this.$cell.addClass("filterable-cell"),t.proxy((function(){this.$element.triggerHandler("init",this)}),this)},destroy:function(){this.$cell.removeClass("filterable-cell filterable-match filterable-mismatch"),this.$cell.removeData("fitlerableCell")}},t.fn.filterableCell=function(i){var o=arguments,n="filterableCell";return this.each((function(){var l=t(this),s=l.data(n),r="object"==typeof i&&i;s||l.data(n,s=new e(this,r)),"string"==typeof i&&s[i].apply(s,Array.prototype.slice.call(o,1))}))},t.fn.filterableCell.defaults={isMatch:null}}(jQuery),function(t){"use strict";var e=function(e,i){this.$row=t(e),this.cells=[],this.options=t.extend({},t.fn.filterableRow.defaults,i),this.init()};e.prototype={constructor:e,cell:function(t){return this.cells[t]},setMatch:function(t){t?(this.$row.addClass("filterable-match"),this.$row.removeClass("filterable-mismatch")):(this.$row.addClass("filterable-mismatch"),this.$row.removeClass("filterable-match"))},hasMismatch:function(){var e=!1;return t.each(this.cells,t.proxy((function(i,o){t.fn.filterableUtils.notNull(o)&&!1===o.match&&(e=!0)}),this)),e},filter:function(t,e){this.cells[e].isMatch(t),this.setMatch(!this.hasMismatch())},ignoredColumn:function(e){return t.fn.filterableUtils.notNull(this.options.onlyColumns)?-1===t.inArray(e,this.options.onlyColumns):-1!==t.inArray(e,this.options.ignoreColumns)},init:function(){var e;this.$row.addClass("filterable-row"),this.$row.children("td").each(t.proxy((function(i,o){this.ignoredColumn(i)?e=null:(t(o).filterableCell(this.options),e=t(o).data("filterableCell")),this.cells.push(e)}),this)),t.proxy((function(){this.$row.triggerHandler("init",this)}),this)},destroy:function(){this.$row.removeClass("filterable-row filterable-match filterable-mismatch"),this.$row.removeData("fitlerableRow")}},t.fn.filterableRow=function(i){var o=arguments,n="filterableRow";return this.each((function(){var l=t(this),s=l.data(n),r="object"==typeof i&&i;s||l.data(n,s=new e(this,r)),"string"==typeof i&&s[i].apply(s,Array.prototype.slice.call(o,1))}))},t.fn.filterableRow.defaults={}}(jQuery),function(t){"use strict";var e=function(e,i){this.$element=t(e),this.rows=null,this.popovers=null,this.queries={},this.options=t.extend({},t.fn.filterable.defaults,i),this.init()};e.prototype={constructor:e,ignoredColumn:function(e){return t.fn.filterableUtils.notNull(this.options.onlyColumns)?-1===t.inArray(e,this.options.onlyColumns):-1!==t.inArray(e,this.options.ignoreColumns)},filterHash:function(t){var e=this.$element.attr("id");return""!=e?"filter_"+e+"_"+t:"filter__"+t},initRows:function(){this.rows=[],this.$element.children("tbody,*").children("tr").each(t.proxy((function(e,i){0!==e&&(t(i).filterableRow(this.options),this.rows.push(t(i).data("filterableRow")))}),this))},autocompleteValues:function(e){var i={};return t.fn.filterableUtils.isNull(this.rows)&&this.initRows(),t.each(this.rows,t.proxy((function(t,o){o.hasMismatch()||(i[o.cell(e).value()]="")}),this)),t.map(i,(function(t,e){return e}))},filter:function(e,i){"function"==typeof this.options.beforeFilter&&this.options.beforeFilter(this.$element,i,e),t.fn.filterableUtils.isNull(this.rows)&&this.initRows(),t.each(this.rows,t.proxy((function(t,o){o.filter(e,i)}),this)),this.queries[i]=e,"function"==typeof this.options.afterFilter&&this.options.afterFilter(this.$element,i,e)},onFilter:function(e,i,o){var n={};""===i?(t.bbq.removeState(this.filterHash(o)),t(e).removeClass("filterable-active")):(n[this.filterHash(o)]=i,t.bbq.pushState(n),t(e).addClass("filterable-active")),t(e).popover("hide"),this.popovers[o].input(i),this.filter(i,o)},closePopovers:function(e){t('[data-toggle="popover"]').each((function(){t(this).is(e.target)||0!==t(this).has(e.target).length||0!==t(".popover").has(e.target).length||t(this).popover("hide")}))},hashChange:function(e,i){var o=this.filterHash(i),n=t.bbq.getState(o)||"";e.input(n),""!==n?e.$heading.addClass("filterable-active"):e.$heading.removeClass("filterable-active"),void 0!==this.queries[i]&&n!=this.queries[i]&&this.filter(n,i)},init:function(){this.$element.addClass("filterable"),this.popovers=[],this.$element.find("tr:first").first().children("td,th").each(t.proxy((function(e,i){if(this.ignoredColumn(e))this.popovers.push(null);else{var o;t.fn.filterableUtils.notNull(this.options.popoverSelector)?o=t(i).find(this.options.popoverSelector):(o=t(i).wrapInner("<div />").children().first(),t(o).data(t(i).data())),this.options.onFilter=t.proxy(this.onFilter,this),t(o).attr("data-toggle","popover").filterablePopover(this.options),this.popovers.push(t(o).data("filterablePopover")),this.popovers[e].index(e),t(o).on("show.bs.popover",t.proxy((function(){this.popovers[e].lookup(this.autocompleteValues(e))}),this));var n=this.filterHash(e),l=t.bbq.getState(n)||"";""!==l&&(this.popovers[e].input(l),t(o).addClass("filterable-active"),this.filter(l,e))}}),this)),t("body").on("click.filterable",t.proxy((function(t){this.closePopovers(t)}),this)),t(window).bind("hashchange.filterable",t.proxy((function(e){t.each(this.popovers,t.proxy((function(e,i){t.fn.filterableUtils.notNull(i)&&this.hashChange(i,e)}),this))}),this)),t.proxy((function(){this.$element.triggerHandler("init",this)}),this)},destroy:function(){this.$element.removeClass("filterable"),this.$element.removeData("filterable")}},t.fn.filterable=function(i){var o=arguments,n="filterable";return this.each((function(){var l=t(this),s=(l.attr("id"),l.data(n)),r="object"==typeof i&&i;s||l.data(n,s=new e(this,r)),"string"==typeof i&&s[i].apply(s,Array.prototype.slice.call(o,1))}))},t.fn.filterable.defaults={ignoreColumns:[],onlyColumns:null,ignoreCase:!0,popoverSelector:null,beforeFilter:null,afterFilter:null}}(jQuery),function(t){"use strict";var e=function(e,i){this.$heading=t(e),this.index,this.value,this.options=t.extend({},t.fn.filterable.defaults,i),this.init()};e.prototype={constructor:e,index:function(e){if(t.fn.filterableUtils.isNull(e))return this.index;this.index=e},input:function(e){if(t.fn.filterableUtils.isNull(e))return this.$content.find(".filter-input");this.value=e},lookup:function(t){this.$content.find(".filter-input").filterableAutocomplete("lookup",t)},init:function(){this.$heading.addClass("filterable-popover");this.$content=t('<form><div class="input-group"><input type="search" class="form-control form-control-sm filter-input"><div class="input-group-append"><button class="btn btn-primary btn-sm filter-btn"><span class="fa fa-check"></span></button><button class="btn btn-danger btn-sm empty-input"><span class="fa fa-times"></span></button></div><div class="position-relative flex-fill w-100 autocomplete-container"></div></div></form>'),this.$content.find(".empty-input").on("click",t.proxy((function(t){t.preventDefault(),this.$content.find(".filter-input").val(""),this.$content.find(".filter-btn").trigger("click.filterable")}),this)),this.$content.find(".filter-btn").on("click.filterable",t.proxy((function(t){t.preventDefault(),"function"==typeof this.options.onFilter&&this.options.onFilter(this.$heading,this.$content.find(".filter-input").val(),this.index)}),this)),t(document).on("click.filterable",".popover-header .close-popover",(function(e){e.preventDefault(),t(this).parents(".popover").popover("hide")})),this.$content.find(".filter-input").filterableAutocomplete(this.options);var e=""!=this.$heading.data("ftTitle")?this.$heading.data("ftTitle")+'<span class="fa fa-times ml-auto close-popover" role="button"></span>':"";this.$heading.popover(t.extend({container:"body",title:e,content:this.$content,sanitize:!1,html:!0,template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header d-flex align-items-center"></h3><div class="popover-body"></div></div>',placement:"top",customClass:"filterable-popover"},this.options.popoverOptions)),this.$heading.on("shown.bs.popover",t.proxy((function(){this.$content.find(".filter-input").val(this.value).focus()}),this)),this.$heading.on("show.bs.popover",t.proxy((function(){this.$heading.addClass("filterable-popover-click")}),this)),this.$heading.on("hide.bs.popover",t.proxy((function(){this.$heading.removeClass("filterable-popover-click")}),this)),t.proxy((function(){this.$heading.triggerHandler("init",this)}),this)},destroy:function(){this.$heading.removeClass("filterable-popover filterable-popover-click"),this.$heading.removeData("filterablePopover")}},t.fn.filterablePopover=function(i){var o=arguments,n="filterablePopover";return this.each((function(){var l=t(this),s=l.data(n),r="object"==typeof i&&i;s||l.data(n,s=new e(this,r)),"string"==typeof i&&s[i].apply(s,Array.prototype.slice.call(o,1))}))},t.fn.filterablePopover.defaults={onFilter:null,popoverOptions:null}}(jQuery),function(t){"use strict";var e=function(e,i){this.$input=t(e),this.options=t.extend({},t.fn.filterable.defaults,i),this.init()};e.prototype={constructor:e,lookup:function(t){this.$input.autocomplete("setOptions",{lookup:t})},init:function(){this.$input.addClass("filterable-autocomplete"),this.$input.autocomplete(t.extend({lookup:[],appendTo:this.$input.siblings(".autocomplete-container")},this.options.autocompleteOptions)),t.proxy((function(){this.$input.triggerHandler("init",this)}),this)},destroy:function(){this.$input.removeClass("filterable-autocomplete"),this.$input.removeData("filterableAutocomplete")}},t.fn.filterableAutocomplete=function(i){var o=arguments,n="filterableAutocomplete";return this.each((function(){var l=t(this),s=l.data(n),r="object"==typeof i&&i;s||l.data(n,s=new e(this,r)),"string"==typeof i&&s[i].apply(s,Array.prototype.slice.call(o,1))}))},t.fn.filterableAutocomplete.defaults={autocompleteOptions:{}}}(jQuery);